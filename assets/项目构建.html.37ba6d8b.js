import{_ as n,o as s,c as a,a as t}from"./app.7ff1f6ec.js";const e={},o=t(`<h1 id="token" tabindex="-1"><a class="header-anchor" href="#token" aria-hidden="true">#</a> Token</h1><h2 id="token-\u83B7\u53D6\u4E0D\u5230\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#token-\u83B7\u53D6\u4E0D\u5230\u7684\u95EE\u9898" aria-hidden="true">#</a> token \u83B7\u53D6\u4E0D\u5230\u7684\u95EE\u9898</h2><ul><li>request \u7684\u8BF7\u6C42\u5934\u4E2D token \u5F97\u503C\u4E0D\u80FD\u7B2C\u4E00\u65F6\u95F4\u83B7\u53D6\u5230 <ul><li>\u539F\u56E0\u662F token \u7684\u503C\u653E\u5728\u4E86 \u8BF7\u6C42\u5934\u5916\u9762</li><li>\u5C06\u53D6\u503C\u7684\u64CD\u4F5C\u653E\u5230\u8BF7\u6C42\u5934\u4E2D\u65B9\u6CD5\u4E2D\u5C31\u597D\u4E86</li></ul></li></ul><h1 id="pinia" tabindex="-1"><a class="header-anchor" href="#pinia" aria-hidden="true">#</a> Pinia</h1><ul><li>getter \u4E2D\u83B7\u53D6\u5E76\u64CD\u4F5C state \u4E2D\u7684\u503C\uFF0C \u9700\u8981\u5C06 state \u5F53\u4F5C\u53C2\u6570\u4F20\u5165\u8FDB\u6765\u624D\u53EF\u4EE5</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token doc-comment comment">/** \u7528\u6237token */</span>
<span class="token keyword">const</span> <span class="token constant">ACCESS_TOKEN_KEY</span> <span class="token operator">=</span> <span class="token string">&#39;ACCESS_TOKEN&#39;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span>Storage<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/Storage&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>defineStore<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span>

<span class="token comment">// userStore \u58F0\u660E pinia \u4ED3\u5E93\u7684 modules \u4E2D\u7684\u5C0F\u4ED3\u5E93\u7684\u552F\u4E00\u503C</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useUserStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&#39;userStore&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token comment">//    id:userStore \u552F\u4E00\u503C\u8FD8\u53EF\u4EE5\u8FD9\u4E48\u5199</span>
	<span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">{</span>
			token<span class="token operator">:</span> Storage<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token constant">ACCESS_TOKEN_KEY</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	getters<span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">// getter\u4E2D\u83B7\u53D6\u5E76\u64CD\u4F5Cstate \u4E2D\u7684\u503C \u9700\u8981\u5C06 state\u5F53\u4F5C\u53C2\u6570\u4F20\u5165\u8FDB\u6765\u624D\u53EF\u4EE5</span>
		<span class="token function">userToken</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// \u83B7\u53D6\u672C\u5730 token \u6CA1\u6709\u7684\u8BDD \u8FD4\u56DEnull</span>
			<span class="token keyword">return</span> state<span class="token punctuation">.</span>token
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	actions<span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token function">LogOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u9000\u51FA&#39;</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>store \u4ED3\u5E93\u7684\u4F7F\u7528</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u5F15\u5165</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>SettingStore<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/store/modules/setting&#39;</span>

<span class="token comment">// \u58F0\u660E</span>
<span class="token keyword">const</span> settingStore <span class="token operator">=</span> <span class="token function">SettingStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// \u4F7F\u7528</span>
settingStore<span class="token punctuation">.</span>loading
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>token \u5B58\u50A8\u5728 pinia \u548C sessionStorage \u4E2D \u624B\u52A8\u5220\u9664\u6D4F\u89C8\u5668\u4E2D\u7684 sessionStorage \u4E2D\u7684\u6570\u636E <ul><li>\u4F46 pinia \u4E2D\u8FD8\u6709\u7F13\u5B58\u6570\u636E\uFF08\u6211\u771F\u662F\u5BF9\u4E0D\u8D77\u6211\u8FD9\u4E2A\u7ECF\u9A8C\u554A \u8FD8\u5728\u60F3\u4E3A\u4F55\u9875\u9762\u5237\u65B0\u4E3A\u4F55\u4E0D\u8DF3\u8F6C\u5230 login \uFF0C\u5B9B\u82E5\u4E00\u4E2A\u3002\u3002\u3002\uFF09</li></ul></li></ul>`,9),p=[o];function i(c,l){return s(),a("div",null,p)}var r=n(e,[["render",i],["__file","\u9879\u76EE\u6784\u5EFA.html.vue"]]);export{r as default};
